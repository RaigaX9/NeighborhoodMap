function initialize(){var a={zoom:14,panControl:!1,panControlOptions:{style:google.maps.ZoomControlStyle.DEFAULT,position:google.maps.ControlPosition.RIGHT_BOTTOM},zoomControl:!1,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.RIGHT_CENTER},overviewMapControl:!1,streetViewControl:!1};try{themap=new google.maps.Map(document.getElementById("map-canvas"),a),$("#map-canvas").height($(window).height())}catch(b){$("#map-canvas").hide(),$("#map-error").html("<h5>Please check your Internet connection. Please try it later!</h5>")}}var themap,LocationsInfo=function(a){this.name=ko.observable(a.venue.name),this.address=ko.observable(a.venue.location.formattedAddress),this.phone=ko.observable(a.venue.contact.formattedPhone),this.rating=ko.observable(a.venue.rating),this.category=ko.observable(a.venue.categories[0].name),this.imgSrc=ko.observable("https://irs0.4sqi.net/img/general/75x75"+a.venue.photos.groups[0].items[0].suffix)},BusinessViewModel=function(){function a(a){if("undefined"!=typeof google){var b=new google.maps.LatLngBounds(new google.maps.LatLng(a.sw.lat,a.sw.lng),new google.maps.LatLng(a.ne.lat,a.ne.lng));themap.fitBounds(b),themap.setCenter(b.getCenter())}}function b(a,b){var c=a.name,d=a.url,e=a.location.address+","+a.location.city+","+a.location.country,f=a.contact.formattedPhone,g=a.rating,i="http://maps.googleapis.com/maps/api/streetview?size=200x100&location="+e,j='<div class="vinfowindow"><div class="venuename"><a href ="'+d+'" target="_blank" >'+c+'</a><span class="vrating label-info badge">'+g+'<sub> /10</sub></span></div><div class="vcontact"><span class="icon-phone"></span>'+f+'</div><img class="otherimg" src="'+i+'"></div>';google.maps.event.addListener(b,"click",function(){h.setContent(j),h.open(themap,b)})}function c(a){function c(){null!=h.getAnimation()?h.setAnimation(null):(h.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){h.setAnimation(null)},2e3))}var d=a.name,e=a.location.lat,f=a.location.lng;if("undefined"!=typeof google){var h=new google.maps.Marker({map:themap,title:d,position:new google.maps.LatLng(e,f),animation:google.maps.Animation.DROP});google.maps.event.addListener(h,"click",c),g.push(h),b(a,h)}}function d(){for(var a=0;a<g.length;a++)g[a].setMap(null);g=[]}function e(a){for(var b in a)c(a[b])}var f=this,g=[];if(f.locationlist=ko.observableArray([]),this.defaultloc=ko.observable("Atlanta, GA"),this.defaultsearch=ko.observable("Sushi"),f.showplaces=ko.observable("true"),"undefined"!=typeof google)var h=new google.maps.InfoWindow;f.searchLocations=function(){var b=[];d(),f.locationlist([]);var c="&query="+f.defaultsearch(),g="&near="+f.defaultloc(),h="https://api.foursquare.com/v2/venues/explore?&client_id=DQIO5RG3KM2ONZTI25QP2FOVC0DEWRV44CCZBAUMTCVBDMNY&client_secret= 4XQSDNXLIYF03KPUFVF2XOXGMKNPRAFK02AXLK4MDCUFRDH4&v=20150501&venuePhotos=1"+g+c;$.getJSON(h,function(c){var d=c.response.groups[0].items;a(c.response.suggestedBounds);for(var g=0;g<d.length;g++){var h=d[g];0!=h.venue.photos.groups.length&&(f.locationlist.push(new LocationsInfo(h)),b.push(h.venue))}f.locationlist.sort(function(a,b){return a.rating()==b.rating()?0:a.rating()>b.rating()?-1:1}),e(b)}).error(function(a){$(".venue-group").html("<h2>Please check your Internet connection. Please try it later!</h2>"),console.log("error")})},f.searchLocations(),f.showList=function(){f.showplaces(!f.showplaces())},f.focusMarker=function(a){for(var b=a.name(),c=0;c<g.length;c++)g[c].title==b&&(google.maps.event.trigger(g[c],"click"),themap.panTo(g[c].position));"none"!=$("#resultslist").css("display")&&f.showList()}};$(document).ready(function(){initialize(),ko.applyBindings(new BusinessViewModel)});