function initialize(){var a=new google.maps.LatLng(33.7592995,-84.387982),b={zoom:14,center:a,panControl:!1,panControlOptions:{style:google.maps.ZoomControlStyle.DEFAULT,position:google.maps.ControlPosition.RIGHT_BOTTOM},zoomControl:!1,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.RIGHT_CENTER},overviewMapControl:!1};map=new google.maps.Map(document.getElementById("map-canvas"),b)}function addMarkers(a){function b(a){var b='<div class="information">';b+="<h4>"+a.title+"</h4>",b+="<p>"+a.ph+"</p>",b+='<p class="review"><img src="'+a.pic+'">'+a.blurb+"</p>",b+="</div>",e.setContent(String(b)),e.open(map,a)}function c(a,b){var c=$(".yelp-list").find("ul"),d=212*b,e=c.find("li"),f=e.eq(b);if(null!=a.getAnimation())a.setAnimation(null),c.removeClass("show"),f.removeClass("active");else{for(x in variousmarkers){var g=variousmarkers[x].getAnimation();g&&x!==b&&variousmarkers[x].setAnimation(null)}a.setAnimation(google.maps.Animation.BOUNCE),c.addClass("show").animate({scrollTop:d},300),c.find(".active").removeClass("active"),f.addClass("active")}}function d(){for(var a=0,b=variousmarkers.length;b>a;a++)variousmarkers[a].setMap(null);variousmarkers=[]}var e=new google.maps.InfoWindow;$(".results").find("li").click(function(){var a=$(this).index();for(x in variousmarkers){var c=variousmarkers[x].getAnimation();c&&x!==a&&variousmarkers[x].setAnimation(null)}variousmarkers[a].setAnimation(google.maps.Animation.BOUNCE),b(variousmarkers[a]),$(".results").find(".active").removeClass("active"),$(this).addClass("active")}),variousmarkers.length>0&&d();for(var f=0,g=a.length;g>f;f++){var h=new google.maps.LatLng(a[f][2],a[f][3]),i=new google.maps.Marker({map:map,position:h,animation:google.maps.Animation.DROP,title:a[f][0],ph:a[f][1],pic:a[f][4],blurb:a[f][5]});variousmarkers.push(i),google.maps.event.addListener(i,"mouseover",function(a,c){return function(){b(a)}}(i,f)),google.maps.event.addListener(i,"click",function(a,d){return function(){b(a),c(a,d)}}(i,f))}}function yelpAjax(a,b){var c={consumerKey:"HUdaOWw_64VTdil8G2oOdw",consumerSecret:"V1VlDm-cjBE_lqIXrubBu4J2y-M",accessToken:"KOGQ4Lp-TpPiur0GcM4APYpN4T4R9kA0",accessTokenSecret:"qKL4acZMm9UChej1sxS7KvqPmpE",serviceProvider:{signatureMethod:"HMAC-SHA1"}},d={consumerSecret:c.consumerSecret,tokenSecret:c.accessTokenSecret},e=[];e.push(["term",b]),e.push(["location",a]),e.push(["callback","cb"]),e.push(["oauth_consumer_key",c.consumerKey]),e.push(["oauth_consumer_secret",c.consumerSecret]),e.push(["oauth_token",c.accessToken]),e.push(["oauth_signature_method","HMAC-SHA1"]);var f={action:"http://api.yelp.com/v2/search",method:"GET",parameters:e};OAuth.setTimestampAndNonce(f),OAuth.SignatureMethod.sign(f,d);var g=OAuth.getParameterMap(f.parameters);yelpData(f.action,g)}function yelpData(a,b){$.ajax({url:a,data:b,dataType:"jsonp",global:!0,jsonpCallback:"cb",success:function(a){getYelpList(a)}})}function getYelpList(a){var b=$(".results");results=a.businesses,ele="",b.empty();var c=[];if(results.length>0){for(result in results){var d=results[result],e=d.name,f=d.image_url,g=/^\+1/.test(d.display_phone)?d.display_phone:"",h=d.url,i=d.rating_img_url_small,j=(d.rating,{lat:d.location.coordinate.latitude,lon:d.location.coordinate.longitude,address:d.location.display_address[0]+"<br>"+d.location.display_address[d.location.display_address.length-1]}),k={img:d.snippet_image_url,txt:d.snippet_text},l='<li><div class="heading row"><p class="col-sm-3 img-container">';l+='<img src="'+f+'" height=100 width=100">',l+='<img src="'+i+'" height=17 width=84 alt="Yelp Rating">',l+='</p><div class="col-sm-9">',l+="<h3>"+e+"</h3><p>",l+="<span>"+j.address+"</span></p>",l+="<p><strong>"+g+"</strong></p>",l+='<p><a class="btn btn-warning" href="'+h+'" target="_blank">Yelp It!</a></p>',l+="</div></div></li>",ele+=l;var m=[e,g,j.lat,j.lon,k.img,k.txt];c.push(m)}b.append(ele),google.maps.event.addDomListener(window,"load",addMarkers(c))}else{var n=$("input").val();b.addClass("open").append("<li><h3>Can't find what you're searching for. <span>"+n+"</span>.</h3><p>Trying searching something else.</p></li>"),google.maps.event.addDomListener(window,"load",addMarkers(c))}}var map;variousmarkers=[],initialize(),yelpAjax("30308","Sushi");